<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§µ‡§ø‡§ú‡§ø‡§ü‡§ø‡§Ç‡§ó ‡§ï‡§æ‡§∞‡•ç‡§°</title>
<meta name="theme-color" content="#007bff" />
<style>
  body { font-family: Arial, sans-serif; background:#f6f9fc; text-align:center; padding:20px; }
  .card { background:#e9f7ff; border-radius:20px; box-shadow:0 6px 15px rgba(0,0,0,0.15); padding:25px; max-width:480px; margin:auto; border:3px solid #007bff; }
  .header { display:flex; align-items:center; justify-content:center; gap:15px; flex-wrap:wrap; }
  .header img { width:110px; height:110px; border-radius:50%; object-fit:cover; border:2px solid #fff; box-shadow:0 2px 6px rgba(0,0,0,0.2); }
  .header-text { text-align:left; display:flex; flex-direction:column; align-items:flex-start; min-width:200px; }
  .header-text h1 { margin:0; font-size:22px; color:#333; }
  .tags { margin-top:6px; display:flex; gap:8px; font-weight:bold; flex-wrap:wrap; }
  .tags span.lic{ color:#007bff } .tags span.mf{ color:#28a745 } .tags span.gi{ color:#dc3545 }
  .buy-container, .my-container { margin:20px auto; max-width:360px; }
  .arrow-down { display:block; font-size:20px; margin-bottom:8px; animation:bounce 1s infinite alternate; }
  @keyframes bounce { from { transform:translateY(0);} to { transform:translateY(5px); } }
  .buy-box, .my-box { border:2px solid #007bff; border-radius:12px; background:#d6f0ff; padding:15px; display:grid; grid-template-columns:1fr 1fr; gap:10px; }
  .buy-box button, .my-box button, .recommend-btn, .mf-btn { padding:12px; font-size:15px; border:none; border-radius:10px; color:white; cursor:pointer; }
  .btn1{background:#007bff;} .btn2{background:#28a745;} .btn3{background:#17a2b8;} .btn4{background:#ffc107;color:black;} .btn5{background:#dc3545;} .btn6{background:#6f42c1;} 
  .btn7{background:#20c997;} .btn8{background:#fd7e14;} 
  .recommend-btn { background:#e83e8c; margin-top:15px; width:90%; }
  .mf-btn { background:#6610f2; margin-top:10px; width:90%; }

  /* Popup styles */
  .popup-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.45); display:none; justify-content:center; align-items:center; z-index:9998; }
  .form-popup { display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:white; padding:18px; border-radius:14px; box-shadow:0 6px 20px rgba(0,0,0,0.25); z-index:9999; width:92%; max-width:420px; max-height:90vh; overflow:auto; }
  .form-popup h3{ margin-top:0; font-size:18px; }
  .form-popup h4{ margin:10px 0 5px; font-size:15px; }
  .form-popup input, .form-popup select { width:100%; padding:8px; margin:5px 0; border-radius:6px; border:1px solid #ccc; box-sizing:border-box; }
  .form-popup button { padding:10px; border-radius:8px; border:none; cursor:pointer; background:#007bff; color:white; }
  .closeBtn { position:absolute; top:10px; right:10px; width:36px; height:36px; border-radius:50%; border:none; background:#f5f5f5; color:#222; font-size:18px; cursor:pointer; box-shadow:0 1px 4px rgba(0,0,0,0.2); z-index:10001; }
  #policyStatus{ font-size:13px; color:#333; min-height:18px; margin-bottom:6px; text-align:left; }

  @media(max-width:420px){
    .header img{width:80px;height:80px;}
    .header-text h1{font-size:18px;}
    .card{max-width:360px;padding:16px;}
  }
</style>
</head>
<body>

<div class="card">
  <!-- Header -->
  <div class="header">
    <img src="MyPhoto.jpg" alt="‡§Ü‡§™‡§ï‡§æ ‡§´‡•ã‡§ü‡•ã">
    <div class="header-text">
      <h1>RAMESH CHAND YADAV</h1>
      <div class="tags">
        <span class="lic">LIC|</span>
        <span class="mf">Mutual Funds|</span>
        <span class="gi">General Insurance</span>
      </div>
      <p style="margin:5px 0 0 0;font-size:14px;color:#333;line-height:1.6;">
        <a href="tel:9868920766" style="text-decoration:none;color:inherit;">üìû 9868920766</a>
        <a href="https://wa.me/7878787878" target="_blank" style="margin-left:6px;text-decoration:none;">
          <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" style="height:18px;width:18px;vertical-align:middle;">
        </a><br>
        <a href="mailto:ram111.2008@rediffmail.com" style="text-decoration:none;color:inherit;">‚úâÔ∏è ram111.2008@rediffmail.com</a>
      </p>
      <a href="mycontact.vcf" download style="display:inline-block;margin-top:5px; padding:5px 10px;font-size:13px; background:#28a745;color:white; border-radius:6px;text-decoration:none;">Save Contact</a>
    </div>
  </div>

  <!-- To Buy Buttons -->
  <div class="buy-container">
    <h3>To Buy Click the button</h3>
    <span class="arrow-down">üëá</span>
    <div class="buy-box">
      <button class="btn1" onclick="openForm('LIC')">LIC</button>
      <button class="btn2" onclick="openForm('Mutual Funds')">Mutual Funds</button>
      <button class="btn3" onclick="openForm('Vehicle Insurance')">Vehicle Insurance</button>
      <button class="btn4" onclick="openForm('Health Insurance')">Health Insurance</button>
      <button class="btn5" onclick="openForm('Travel Insurance')">Travel Insurance</button>
      <button class="btn6" onclick="openForm('PA Policy')">PA Policy</button>
    </div>
  </div>

  <!-- Briefcase -->
  <div class="my-container">
    <h3>Keep all your policies & investments safe ‚Äî use this briefcase üëú üëá</h3>
    <span class="arrow-down">üëá</span>
    <div class="my-box">
      <button class="btn7" onclick="openPdfForm('upload')">Upload PDF</button>
      <button class="btn8" onclick="openPdfForm('view')">View PDF</button>
    </div>
  </div>

  <!-- MF Folios Button -->
  <div style="margin-top:10px;">
    <button class="mf-btn" onclick="openMFForm()">MF Folios</button>
  </div>

  <!-- Recommend & Earn Button -->
  <div style="margin-top:10px;">
    <button class="recommend-btn" onclick="openRecommendForm()">Recommend & Earn</button>
  </div>

</div>

<!-- Popups -->
<div class="popup-overlay" id="popupOverlay"></div>

<!-- Upload/View PDF Popup -->
<div class="form-popup" id="pdfPopup">
  <h3 id="pdfTitle">Upload PDF</h3>
  <button class="closeBtn" onclick="closeAllPopups()">‚úï</button>
  <form id="pdfForm">
    <input type="text" name="code" placeholder="4 ‡§°‡§ø‡§ú‡§ø‡§ü ‡§ï‡•ã‡§°" maxlength="4" required>
    <input type="text" name="mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Ç‡§¨‡§∞" required>
    <input type="email" name="email" placeholder="‡§à‡§Æ‡•á‡§≤" required>
    <select name="pdfType" required>
      <option value="">PDF Type ‡§ö‡•Å‡§®‡•á‡§Ç</option>
      <option>LIC</option>
      <option>Mutual Funds</option>
      <option>Vehicle Insurance</option>
      <option>Health Insurance</option>
      <option>Travel Insurance</option>
      <option>PA Policy</option>
    </select>
    <input type="file" name="pdfFile" accept="application/pdf" style="display:none;" required>
    <button type="button" id="selectPdfBtn">Select PDF</button>
    <span id="selectedFileName" style="font-size:13px;margin-left:10px;"></span>
    <button type="submit" style="margin-top:10px;">Submit PDF</button>
  </form>
</div>

<!-- MF Folios Popup -->
<div class="form-popup" id="mfPopup">
  <h3>‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•Å‡§ù‡•á ‡§Æ‡•á‡§∞‡•á Mutual Funds Folios ‡§¶‡•á‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ö‡§™‡§®‡§æ App ‡§¶‡•á‡§®‡•á ‡§ï‡•Ä ‡§ï‡•É‡§™‡§æ ‡§ï‡§∞‡•á‡§Ç</h3>
  <button class="closeBtn" onclick="closeAllPopups()">‚úï</button>
  <form id="mfForm">
    <input type="text" name="name" placeholder="‡§®‡§æ‡§Æ" required>
    <input type="email" name="email" placeholder="‡§à‡§Æ‡•á‡§≤" required>
    <input type="text" name="mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Æ‡•ç‡§¨‡§∞" required>
    <select name="time" required>
      <option value="">‡§ï‡•â‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø</option>
      <option>‡§∏‡•Å‡§¨‡§π</option><option>‡§¶‡•ã‡§™‡§π‡§∞</option><option>‡§∂‡§æ‡§Æ</option>
    </select>
    <button type="submit">‡§∏‡§¨‡§Æ‡§ø‡§ü</button>
  </form>
</div>

<!-- Recommend & Earn Popup -->
<div class="form-popup" id="recommendPopup">
  <h3>Recommend & Earn Form</h3>
  <button class="closeBtn" onclick="closeAllPopups()">‚úï</button>
  <form id="recommendForm">
    <input type="hidden" name="formType" value="Recommend">
    <h4>‡§∞‡§ø‡§ï‡§Æ‡•á‡§Ç‡§° ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø</h4>
    <input type="text" name="recommended_name" placeholder="‡§®‡§æ‡§Æ" required>
    <input type="email" name="recommended_email" placeholder="‡§à‡§Æ‡•á‡§≤" required>
    <input type="text" name="recommended_mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Æ‡•ç‡§¨‡§∞" required>
    <select name="interest" required>
      <option value="">‡§ï‡•ç‡§Ø‡§æ ‡§≤‡•á‡§®‡•á ‡§Æ‡•á‡§Ç ‡§∞‡•Å‡§ö‡§ø ‡§π‡•à?</option>
      <option value="LIC">LIC</option>
      <option value="MF">Mutual Funds</option>
      <option value="Health">Health Policy</option>
      <option value="Vehicle">Vehicle Policy</option>
    </select>
    <h4>‡§´‡•â‡§∞‡•ç‡§Æ ‡§≠‡§∞‡§®‡•á ‡§µ‡§æ‡§≤‡§æ</h4>
    <input type="text" name="your_name" placeholder="‡§Ü‡§™‡§ï‡§æ ‡§®‡§æ‡§Æ" required>
    <input type="email" name="your_email" placeholder="‡§à‡§Æ‡•á‡§≤" required>
    <input type="text" name="your_mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§®‡§Æ‡•ç‡§¨‡§∞" required>
    <button type="submit">‡§∏‡§¨‡§Æ‡§ø‡§ü</button>
  </form>
</div>

<script>
const GAS_URL = 'https://script.google.com/macros/s/AKfycbyXYvtK6D2MDLQfXvLCWxirHRS9K5BrXDvtt28cJeCv_5Fka5m64RNcQcgd1HxpvyBDfw/exec';
const overlay = document.getElementById('popupOverlay');

function showPopup(el){
  overlay.style.display='flex';
  document.querySelectorAll('.form-popup').forEach(p=>p.style.display='none');
  el.style.display='block';
}
function closeAllPopups(){
  overlay.style.display='none';
  document.querySelectorAll('.form-popup').forEach(p=>{
    p.style.display='none';
    // üßπ popup form reset
    const form = p.querySelector('form');
    if(form) form.reset();
    // üßπ ‡§´‡§æ‡§á‡§≤ ‡§ï‡§æ ‡§®‡§æ‡§Æ label ‡§≠‡•Ä ‡§∏‡§æ‡§´ ‡§ï‡§∞ ‡§¶‡•ã
    const fname = p.querySelector('#selectedFileName');
    if(fname) fname.innerText = "";
  });
}

overlay.addEventListener('click', ()=>closeAllPopups());
document.addEventListener('keydown', e=>{ if(e.key==='Escape') closeAllPopups(); });

// To Buy buttons
function openForm(service){
  const box = document.createElement('div');
  box.className='form-popup';
  box.innerHTML = `<h3>${service} ‡§ï‡•á ‡§≤‡§ø‡§è ‡§µ‡§ø‡§µ‡§∞‡§£ ‡§≠‡§∞‡•á‡§Ç</h3>
    <button class="closeBtn" onclick="closeAllPopups()">‚úï</button>
    <form class="tempForm">
      <input type="hidden" name="formType" value="${service}">
      <input type="text" name="name" placeholder="‡§®‡§æ‡§Æ" required>
      <input type="email" name="email" placeholder="‡§à‡§Æ‡•á‡§≤" required>
      <input type="text" name="mobile" placeholder="‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤" required>
      <select name="time" required>
        <option value="">‡§ï‡•â‡§≤ ‡§ï‡§∞‡§®‡•á ‡§ï‡§æ ‡§∏‡§π‡•Ä ‡§∏‡§Æ‡§Ø</option>
        <option>‡§∏‡•Å‡§¨‡§π</option><option>‡§¶‡•ã‡§™‡§π‡§∞</option><option>‡§∂‡§æ‡§Æ</option>
      </select>
      <button type="submit">‡§∏‡§¨‡§Æ‡§ø‡§ü</button>
    </form>`;
  document.body.appendChild(box);
  showPopup(box);
  box.querySelector('form').addEventListener('submit', e=>{
    e.preventDefault();
    const fd = new FormData(e.target);
    fetch(GAS_URL,{method:'POST',body:fd})
      .then(()=>{ alert('Sent!'); closeAllPopups(); })
      .catch(err=>{ console.error(err); alert('Error'); });
  });
}

// MF Folios
function openMFForm(){ showPopup(document.getElementById('mfPopup')); }
document.getElementById('mfForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const fd = new FormData(this);
  try { await fetch(GAS_URL,{method:'POST',body:fd}); alert('Sent!'); closeAllPopups(); }
  catch(err){ console.error(err); alert('Error'); }
});

// Recommend
function openRecommendForm(){ showPopup(document.getElementById('recommendPopup')); }
document.getElementById('recommendForm').addEventListener('submit', async function(e){
  e.preventDefault();
  const fd = new FormData(this);
  try { await fetch(GAS_URL,{method:'POST',body:fd}); alert('Sent!'); closeAllPopups(); }
  catch(err){ console.error(err); alert('Error'); }
});

// PDF Upload/View
function openPdfForm(mode){ 
  const popup=document.getElementById('pdfPopup'); 
  document.getElementById('pdfTitle').innerText = mode==='upload'?'Upload your PDF':'View PDF';
  popup.dataset.mode=mode;
  showPopup(popup);

  if(mode==='view'){
    // view mode ‡§Æ‡•á code/mobile/email input validate
    const form = popup.querySelector('form');
    form.onsubmit = async e=>{
      e.preventDefault();
      const code = form.querySelector('input[name="code"]').value;
      const mobile = form.querySelector('input[name="mobile"]').value;
      const email = form.querySelector('input[name="email"]')?.value || '';
      try{
        const res = await fetch(`${GAS_URL}?action=view&code=${encodeURIComponent(code)}&mobile=${encodeURIComponent(mobile)}&email=${encodeURIComponent(email)}`);
        const data = await res.json();
        if(data.result==='success' && data.fileUrl){
          window.open(data.fileUrl,'_blank');
          closeAllPopups();
        } else alert('Code/Mobile or Code/Email mismatch!');
      } catch(err){
        console.error(err);
        alert('Error: '+err);
      }
    }
  }
}

document.getElementById('selectPdfBtn').addEventListener('click',()=>document.querySelector('input[name="pdfFile"]').click());
document.querySelector('input[name="pdfFile"]').addEventListener('change', e=>{
  const file = e.target.files[0];
  if(file) document.getElementById('selectedFileName').innerText=file.name;
});
document.getElementById('pdfForm').addEventListener('submit', async e=>{
  e.preventDefault();
  const form = e.target;
  const file = form.querySelector('input[name="pdfFile"]').files[0];
  if(!file) return alert('Please select PDF');
  if(file.size>5*1024*1024) return alert('5 MB max');

  const reader = new FileReader();
  reader.onload = async ()=>{
    const base64 = reader.result.split(',')[1];
    const fd = new FormData(form);
    fd.append('base64', base64);
    fd.append('filename', file.name);  // ‡§®‡§Ø‡§æ line
    try{
      const res = await fetch(GAS_URL,{method:'POST',body:fd});
      const data = await res.json();   // response JSON parse
      if(data.result==='success') alert('PDF uploaded!'); 
      closeAllPopups();
    } catch(err){
      console.error(err);
      alert('Error: '+err);
    }
  };
  reader.readAsDataURL(file);
});

</script>

</body>
</html>
